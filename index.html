<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>The Pulse | 에이펙스 자아 접속</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Supabase JS Library -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;400;700&display=swap');
        body { font-family: 'Noto Sans KR', sans-serif; background-color: #020617; color: #f1f5f9; overflow-x: hidden; margin: 0; -webkit-tap-highlight-color: transparent; }
        .fade-in { animation: fadeIn 1s forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .pulse-circle { width: 260px; height: 260px; border-radius: 50%; background: radial-gradient(circle, rgba(34, 211, 238, 0.15) 0%, rgba(0,0,0,0) 70%); display: flex; align-items: center; justify-content: center; position: relative; cursor: pointer; user-select: none; -webkit-user-select: none; transition: all 0.3s ease; touch-action: none; }
        .pulse-inner { width: 120px; height: 120px; border-radius: 50%; background: #22d3ee; box-shadow: 0 0 40px #22d3ee; animation: pulse-anim 1.5s infinite cubic-bezier(0.4, 0, 0.6, 1); pointer-events: none; }
        @keyframes pulse-anim { 0% { transform: scale(0.95); opacity: 0.8; } 50% { transform: scale(1.05); opacity: 1; box-shadow: 0 0 60px #22d3ee; } 100% { transform: scale(0.95); opacity: 0.8; } }
        .holding .pulse-inner { animation: pulse-fast 0.4s infinite alternate; box-shadow: 0 0 80px #22d3ee; }
        @keyframes pulse-fast { from { transform: scale(1.0); } to { transform: scale(1.1); } }
        .progress-ring { position: absolute; top: 0; left: 0; transform: rotate(-90deg); pointer-events: none; }
        textarea::placeholder { color: #475569; }
        .heart-beat { animation: heartBeat 0.8s infinite; }
        @keyframes heartBeat { 0% { transform: scale(1); } 15% { transform: scale(1.2); } 30% { transform: scale(1); } 45% { transform: scale(1.15); } 60% { transform: scale(1); } }
        .hidden { display: none !important; }
        .glass-card { background: rgba(15, 23, 42, 0.6); border: 1px solid rgba(34, 211, 238, 0.1); backdrop-filter: blur(12px); }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4 py-12">

    <!-- [STEP 1] Landing Section -->
    <div id="section-landing" class="max-w-2xl w-full text-center fade-in">
        <h1 class="text-xs tracking-[0.6em] text-cyan-400 mb-8 font-light uppercase">Alpha Zone Connection</h1>
        <h2 class="text-4xl md:text-5xl font-bold mb-6 leading-tight">당신의 맥박은<br><span class="text-cyan-400">당신의 것이 아닙니다.</span></h2>
        <p class="text-slate-400 text-lg mb-12 font-light px-4">지금 가슴에 손을 얹고, 미래의 당신(Apex Self)을 수신하세요.<br>버튼을 길게 눌러 동기화를 시작합니다.</p>
        <div class="flex justify-center mb-8">
            <div id="hold-trigger" class="pulse-circle">
                <svg class="progress-ring" width="260" height="260">
                    <circle id="sync-progress-circle" stroke="#22d3ee" stroke-width="6" fill="transparent" r="127" cx="130" cy="130" stroke-dasharray="798" stroke-dashoffset="798" />
                </svg>
                <div class="pulse-inner"></div>
                <p id="trigger-label" class="absolute text-[10px] font-bold tracking-widest text-slate-900 uppercase">Hold to Sync</p>
            </div>
        </div>
    </div>

    <!-- [STEP 2] Input Noise -->
    <div id="section-input" class="max-w-md w-full glass-card p-8 rounded-3xl hidden fade-in">
        <div class="text-center mb-8">
            <i class="fa-solid fa-tower-broadcast text-cyan-400 text-3xl mb-4"></i>
            <h2 class="text-2xl font-bold">주파수 채널 개방</h2>
        </div>
        <textarea id="noise-input" class="w-full h-40 bg-slate-800/40 border border-slate-700 rounded-2xl p-4 outline-none focus:border-cyan-500 transition-all text-slate-200 resize-none mb-6" placeholder="지금 당신을 힘들게 하는 고민이나 노이즈는 무엇인가요?"></textarea>
        <button onclick="processSignal()" class="w-full py-4 bg-cyan-500 text-slate-950 font-bold rounded-2xl">시그널 전송</button>
    </div>

    <!-- [STEP 3] Syncing -->
    <div id="section-syncing" class="text-center hidden fade-in">
        <i class="fa-solid fa-heart text-rose-500 text-5xl heart-beat mb-6"></i>
        <p class="text-cyan-400 font-mono tracking-widest text-sm">SYNCING TO ALPHA ZONE...</p>
    </div>

    <!-- [STEP 4] Message Display -->
    <div id="section-message" class="max-w-md w-full text-center hidden fade-in">
        <h3 id="apex-message" class="text-xl md:text-2xl font-medium leading-relaxed italic text-white mb-10"></h3>
        <button onclick="showTractionHub()" class="w-full py-4 bg-cyan-500 text-slate-950 font-bold rounded-2xl mb-4">연결 심화하기</button>
    </div>

    <!-- [STEP 5] Traction Hub -->
    <div id="section-traction" class="max-w-xl w-full hidden fade-in">
        <div class="text-center mb-10"><h2 class="text-3xl font-bold">당신의 Pulse를 완성하세요</h2></div>
        <div class="space-y-6">
            <div class="glass-card p-6 rounded-3xl">
                <h3 class="font-bold mb-2">미래 자아 시그널 레터</h3>
                <div class="flex gap-2">
                    <input type="email" id="subscriber-email" class="flex-1 bg-slate-800/50 border border-slate-700 rounded-xl px-4 py-3 text-sm" placeholder="이메일 주소 입력">
                    <button id="btn-subscribe" onclick="submitEmail()" class="bg-cyan-500 text-slate-950 px-6 py-3 rounded-xl font-bold text-sm">구독</button>
                </div>
                <p id="subscribe-msg" class="text-[10px] text-cyan-400 mt-2 hidden">구독 신청이 완료되었습니다.</p>
            </div>
            <div class="glass-card p-6 rounded-3xl">
                <h3 class="font-bold mb-2">익명의 메시지 전달</h3>
                <textarea id="feedback-text" class="w-full bg-slate-800/30 border border-slate-700 rounded-xl p-3 text-sm h-24 mb-3" placeholder="의견을 남겨주세요..."></textarea>
                <button id="btn-feedback" onclick="submitFeedback()" class="w-full py-3 border border-slate-700 text-slate-300 rounded-xl font-bold text-sm">의견 보내기</button>
            </div>
        </div>
    </div>

    <script>
        // --- Supabase 설정 ---
        // TODO: 본인의 Supabase URL과 Anon Key로 교체하세요.
        const SUPABASE_URL = 'https://YOUR_PROJECT_URL.supabase.co';
        const SUPABASE_ANON_KEY = 'YOUR_ANON_KEY';
        const _supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        const apexMessages = ["이미 다 끝났어. 너는 그저 걸어오기만 하면 돼.", "불안해하지 마. 네가 느끼는 떨림은 환희의 주파수야.", "기억해. 너는 드래프트 월드의 주인공이 아니라 창조자야."];

        const trigger = document.getElementById('hold-trigger');
        const progressCircle = document.getElementById('sync-progress-circle');
        const triggerLabel = document.getElementById('trigger-label');
        let holdTimer, progress = 0;
        const totalDash = 798;

        const startHold = (e) => {
            e.preventDefault();
            progress = 0;
            triggerLabel.innerText = "SYNCING...";
            trigger.classList.add('holding');
            holdTimer = setInterval(() => {
                progress += 2;
                progressCircle.style.strokeDashoffset = totalDash - (totalDash * progress / 100);
                if (progress >= 100) { clearInterval(holdTimer); transitionToInput(); }
            }, 30);
        };
        const stopHold = () => { clearInterval(holdTimer); trigger.classList.remove('holding'); if (progress < 100) { progress = 0; progressCircle.style.strokeDashoffset = totalDash; triggerLabel.innerText = "HOLD TO SYNC"; } };

        trigger.addEventListener('mousedown', startHold);
        trigger.addEventListener('touchstart', startHold);
        window.addEventListener('mouseup', stopHold);
        window.addEventListener('touchend', stopHold);

        function transitionToInput() { document.getElementById('section-landing').classList.add('hidden'); document.getElementById('section-input').classList.remove('hidden'); }
        function processSignal() { if (!document.getElementById('noise-input').value.trim()) return; document.getElementById('section-input').classList.add('hidden'); document.getElementById('section-syncing').classList.remove('hidden'); setTimeout(showFinalMessage, 2000); }
        function showFinalMessage() { document.getElementById('apex-message').innerText = `"${apexMessages[Math.floor(Math.random() * apexMessages.length)]}"`; document.getElementById('section-syncing').classList.add('hidden'); document.getElementById('section-message').classList.remove('hidden'); }
        function showTractionHub() { document.getElementById('section-message').classList.add('hidden'); document.getElementById('section-traction').classList.remove('hidden'); }

        async function submitEmail() {
            const email = document.getElementById('subscriber-email').value.trim();
            if (!email.includes('@')) return;
            const { error } = await _supabase.from('subscribers').insert([{ email }]);
            if (!error) { document.getElementById('subscribe-msg').classList.remove('hidden'); document.getElementById('subscriber-email').value = ''; }
        }

        async function submitFeedback() {
            const content = document.getElementById('feedback-text').value.trim();
            if (!content) return;
            const { error } = await _supabase.from('feedbacks').insert([{ content }]);
            if (!error) { alert('의견이 전송되었습니다.'); document.getElementById('feedback-text').value = ''; }
        }
    </script>
</body>
</html>
