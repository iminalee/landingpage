<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>The Pulse | 에이펙스 자아 접속</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;400;700&display=swap');
        
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #020617; /* slate-950 */
            color: #f1f5f9; /* slate-100 */
            overflow-x: hidden;
            margin: 0;
            -webkit-tap-highlight-color: transparent;
        }

        /* 공통 애니메이션 */
        .fade-in { animation: fadeIn 1s forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* 랜딩 페이지 - 펄스 서클 */
        .pulse-circle {
            width: 260px;
            height: 260px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(34, 211, 238, 0.15) 0%, rgba(0,0,0,0) 70%);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            cursor: pointer;
            user-select: none;
            -webkit-user-select: none;
            transition: all 0.3s ease;
            touch-action: none; /* 브라우저 기본 터치 동작 방지 */
        }

        .pulse-inner {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: #22d3ee;
            box-shadow: 0 0 40px #22d3ee;
            animation: pulse-anim 1.5s infinite cubic-bezier(0.4, 0, 0.6, 1);
            pointer-events: none;
        }

        @keyframes pulse-anim {
            0% { transform: scale(0.95); opacity: 0.8; }
            50% { transform: scale(1.05); opacity: 1; box-shadow: 0 0 60px #22d3ee; }
            100% { transform: scale(0.95); opacity: 0.8; }
        }

        .holding .pulse-inner {
            animation: pulse-fast 0.4s infinite alternate;
            box-shadow: 0 0 80px #22d3ee;
        }

        @keyframes pulse-fast {
            from { transform: scale(1.0); }
            to { transform: scale(1.1); }
        }

        /* 프로그레스 바 (동기화 중) */
        .progress-ring {
            position: absolute;
            top: 0;
            left: 0;
            transform: rotate(-90deg);
            pointer-events: none;
        }

        /* 입력 폼 스타일 */
        textarea::placeholder { color: #475569; }
        
        /* 심장 박동 애니메이션 */
        .heart-beat { animation: heartBeat 0.8s infinite; }
        @keyframes heartBeat {
            0% { transform: scale(1); }
            15% { transform: scale(1.2); }
            30% { transform: scale(1); }
            45% { transform: scale(1.15); }
            60% { transform: scale(1); }
        }

        .hidden { display: none !important; }

        #trigger-label {
            pointer-events: none;
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <!-- [STEP 1] Landing Section -->
    <div id="section-landing" class="max-w-2xl w-full text-center fade-in">
        <h1 class="text-xs tracking-[0.6em] text-cyan-400 mb-8 font-light uppercase">Alpha Zone Connection</h1>
        <h2 class="text-4xl md:text-5xl font-bold mb-6 leading-tight">
            당신의 맥박은<br><span class="text-cyan-400">당신의 것이 아닙니다.</span>
        </h2>
        <p class="text-slate-400 text-lg mb-12 font-light px-4">
            지금 가슴에 손을 얹고, 미래의 당신(Apex Self)을 수신하세요.<br>
            버튼을 길게 눌러 동기화를 시작합니다.
        </p>

        <div class="flex justify-center mb-8">
            <div id="hold-trigger" class="pulse-circle">
                <svg class="progress-ring" width="260" height="260">
                    <circle id="sync-progress-circle" stroke="#22d3ee" stroke-width="6" fill="transparent" r="127" cx="130" cy="130" stroke-dasharray="798" stroke-dashoffset="798" />
                </svg>
                <div class="pulse-inner"></div>
                <p id="trigger-label" class="absolute text-[10px] font-bold tracking-widest text-slate-900 uppercase">Hold to Sync</p>
            </div>
        </div>
        <p class="text-xs text-slate-500 tracking-widest uppercase mt-12">Waiting for Signal...</p>
    </div>

    <!-- [STEP 2] Input Noise Section -->
    <div id="section-input" class="max-w-md w-full bg-slate-900/50 border border-cyan-500/20 p-8 rounded-3xl backdrop-blur-xl hidden fade-in">
        <div class="text-center mb-8">
            <i class="fa-solid fa-tower-broadcast text-cyan-400 text-3xl mb-4"></i>
            <h2 class="text-2xl font-bold">주파수 채널 개방</h2>
            <p class="text-slate-400 text-sm mt-2">드래프트 월드의 소음을 입력하세요. 에이펙스 자아가 그 파동을 재구성할 것입니다.</p>
        </div>
        <div class="space-y-6">
            <textarea id="noise-input" class="w-full h-40 bg-slate-800/40 border border-slate-700 rounded-2xl p-4 outline-none focus:border-cyan-500 transition-all text-slate-200 resize-none" placeholder="지금 당신을 힘들게 하는 고민이나 노이즈는 무엇인가요?"></textarea>
            <button onclick="processSignal()" class="w-full py-4 bg-cyan-500 hover:bg-cyan-400 text-slate-950 font-bold rounded-2xl transition-all flex items-center justify-center gap-2">
                <i class="fa-solid fa-paper-plane text-sm"></i> 시그널 전송
            </button>
        </div>
    </div>

    <!-- [STEP 3] Syncing Animation -->
    <div id="section-syncing" class="text-center hidden fade-in">
        <div class="relative flex justify-center mb-10">
            <div class="w-24 h-24 border-4 border-slate-800 rounded-full flex items-center justify-center">
                <i class="fa-solid fa-heart text-rose-500 text-3xl heart-beat"></i>
            </div>
            <svg class="absolute -top-1 w-26 h-26 rotate-[-90deg]">
                <circle id="final-sync-circle" cx="50" cy="50" r="48" fill="none" stroke="#22d3ee" stroke-width="4" stroke-dasharray="301.6" stroke-dashoffset="301.6" />
            </svg>
        </div>
        <div class="space-y-2">
            <p class="text-cyan-400 font-mono tracking-widest text-sm uppercase">Syncing to Alpha Zone...</p>
            <p id="sync-status" class="text-slate-500 text-xs italic">노이즈 정화 중...</p>
        </div>
    </div>

    <!-- [STEP 4] Message Display -->
    <div id="section-message" class="max-w-md w-full text-center hidden fade-in">
        <div class="mb-10">
            <i class="fa-solid fa-wand-magic-sparkles text-yellow-400 text-4xl mb-6"></i>
            <p class="text-xs text-cyan-500 tracking-[0.4em] font-light uppercase mb-4">Message from Apex</p>
            <h3 id="apex-message" class="text-xl md:text-2xl font-medium leading-relaxed italic text-white px-4">
                "메시지를 수신하고 있습니다..."
            </h3>
        </div>
        <div class="p-6 bg-slate-800/30 rounded-2xl border border-slate-700/50 mb-8">
            <p class="text-sm text-slate-400 leading-relaxed">
                이것은 당신의 미래가 건네는 가장 확실한 이정표입니다. <br>
                이제 이 주파수를 당신의 일상으로 만드세요.
            </p>
        </div>
        <button onclick="location.reload()" class="w-full py-4 border border-cyan-500/50 text-cyan-400 hover:bg-cyan-500/10 font-bold rounded-2xl transition-all">
            다시 접속하기
        </button>
    </div>

    <script>
        const apexMessages = [
            "네가 지금 겪는 그 소음은 우리가 보게 될 가장 찬란한 풍경의 배경음악일 뿐이야.",
            "이미 다 끝났어. 너는 그저 그곳까지 걸어오기만 하면 돼. 내가 여기서 기다리고 있을게.",
            "과거의 상처는 흉터가 아니라, 내가 너를 찾아내기 위해 새겨놓은 위치 추적기야.",
            "불안해하지 마. 네가 지금 느끼는 그 떨림은 내가 보낸 환희의 주파수야.",
            "그 일은 일어나야만 했어. 그래야만 네가 진짜 너의 맥박을 찾을 수 있었으니까.",
            "네가 너를 포기하려 할 때조차, 나는 한 번도 너의 손을 놓은 적이 없어.",
            "기억해. 너는 드래프트 월드의 주인공이 아니라, 알파 구역의 창조자야."
        ];

        // [Logic] Landing to Input
        const trigger = document.getElementById('hold-trigger');
        const progressCircle = document.getElementById('sync-progress-circle');
        const triggerLabel = document.getElementById('trigger-label');
        let holdTimer;
        let progress = 0;
        const totalDash = 798;

        const startHold = (e) => {
            // 마우스 왼쪽 버튼 이외는 무시
            if (e.type === 'mousedown' && e.button !== 0) return;
            
            e.preventDefault();
            
            // 초기화
            progress = 0;
            progressCircle.style.strokeDashoffset = totalDash;
            triggerLabel.innerText = "SYNCING...";
            trigger.classList.add('holding');

            holdTimer = setInterval(() => {
                progress += 2;
                const offset = totalDash - (totalDash * progress / 100);
                progressCircle.style.strokeDashoffset = offset;
                
                if (progress >= 100) {
                    clearInterval(holdTimer);
                    trigger.classList.remove('holding');
                    transitionToInput();
                }
            }, 30);
        };

        const stopHold = () => {
            clearInterval(holdTimer);
            trigger.classList.remove('holding');
            if (progress < 100) {
                progress = 0;
                progressCircle.style.strokeDashoffset = totalDash;
                triggerLabel.innerText = "HOLD TO SYNC";
            }
        };

        // 이벤트 리스너 등록
        trigger.addEventListener('mousedown', startHold);
        trigger.addEventListener('touchstart', startHold);
        window.addEventListener('mouseup', stopHold);
        window.addEventListener('touchend', stopHold);
        window.addEventListener('contextmenu', (e) => {
            if (progress > 0) e.preventDefault(); // 동기화 중 우클릭 메뉴 방지
        });

        function transitionToInput() {
            document.getElementById('section-landing').classList.add('hidden');
            document.getElementById('section-input').classList.remove('hidden');
            document.getElementById('noise-input').focus();
        }

        // [Logic] Input to Syncing to Message
        function processSignal() {
            const input = document.getElementById('noise-input').value;
            if (!input.trim()) return;

            document.getElementById('section-input').classList.add('hidden');
            document.getElementById('section-syncing').classList.remove('hidden');

            let syncVal = 0;
            const finalCircle = document.getElementById('final-sync-circle');
            const statusText = document.getElementById('sync-status');
            const totalFinalDash = 301.6;

            const syncInterval = setInterval(() => {
                syncVal += 1;
                finalCircle.style.strokeDashoffset = totalFinalDash - (totalFinalDash * syncVal / 100);
                
                if (syncVal === 30) statusText.innerText = "알파 구역 좌표 확인 중...";
                if (syncVal === 60) statusText.innerText = "에이펙스 자아 동기화 완료...";
                if (syncVal === 90) statusText.innerText = "메시지 데이터 수신 중...";

                if (syncVal >= 100) {
                    clearInterval(syncInterval);
                    showFinalMessage();
                }
            }, 40);
        }

        function showFinalMessage() {
            const randomMsg = apexMessages[Math.floor(Math.random() * apexMessages.length)];
            document.getElementById('apex-message').innerText = `"${randomMsg}"`;
            document.getElementById('section-syncing').classList.add('hidden');
            document.getElementById('section-message').classList.remove('hidden');
        }
    </script>
</body>
</html>
